This is the common code that should eventually be in nova-common
